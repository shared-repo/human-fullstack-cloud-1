<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">    
    <title>이미지 갤러리</title>
    <style>
        table { margin: 0 auto; }
        td img {
            width: 100px;
        }
        #view { text-align: center; }
        #view img { width: 400px; height: 400px; border: solid 1px black; }
    </style>
</head>
<body>
    <table id="images-table">
        <tr>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
            <td><img></td>
        </tr>
    </table>

    <div id="view">
        <table>
            <tr>
                <td><img></td>                
            </tr>
            <tr>
                <td>
                    <button id="btn-auto">자동보기</button>
                    <button id="btn-stop">중지</button>
                </td>
            </tr>
        </table>
    </div>

    <script>
        const images = document.querySelectorAll('#images-table img');
        const viewImg = document.querySelector("#view img");

        for (let i = 0; i < images.length; i++) {
            images[i].src = `images/${i}.jpg`;
        }

        function changeImage(event) {
            const img = event.target;
            viewImg.src = img.src;

            images[currentPosition].style.border = "";
            for (let i = 0; i < images.length; i++) {   // 이미지 목록을 순회하면서
                // if (images[i].src == img.src) {      // 현재 클릭된 이미지와 같은 이미지라면
                if (images[i] == img) {                 // 현재 클릭된 이미지와 같은 이미지라면
                    currentPosition = i;                // 현재 이미지 위치 변수 수정
                    break;
                }
            }
            images[currentPosition].style.border = "solid 2px blue";
        }
        for (let i = 0; i < images.length; i++) {
            images[i].addEventListener('click', changeImage);
        }

        ////////////////////////////////////////////////////////

        let currentPosition = 0;
        viewImg.src = images[currentPosition].src;
        images[currentPosition].style.border = "solid 2px blue";

        const btnAuto = document.querySelector('#btn-auto');
        const btnStop = document.querySelector('#btn-stop');

        function moveNext() {
            images[currentPosition].style.border = "";
            currentPosition++;
            if (currentPosition > images.length - 1) {
                currentPosition = 0;
            }
            viewImg.src = images[currentPosition].src;
            images[currentPosition].style.border = "solid 2px blue";
        }
        
        let timerId = null;
        btnAuto.addEventListener('click', (event) => {
            // if (timerId != null) { // false : false or 0 or "" or null or []
            if (timerId) {
                return;
            }
            timerId = setInterval(moveNext, 3000); // 3초에 한 번씩 moveNext를 호출
        });
        btnStop.addEventListener('click', (event) => {
            clearInterval(timerId);
            timerId = null;
        });

    </script>
</body>
</html>