<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">    
    <title>이미지 표시기</title>
    <style>
        table { margin: 0 auto; }
        img { width: 100%; height: 400px; }
        button { width: 250px; height: 50px; }
    </style>
</head>
<body>
    <table>
        <tr>
            <td colspan="2">
                <img id="img-main">
            </td>
        </tr>
        <tr>
            <td>
                <button id="btn-start">랜덤 보기</button>
            </td>
            <td>
                <button id="btn-stop">중지</button>
            </td>
        </tr>
    </table>
    
    <script>
        const imgMain = document.querySelector('#img-main');
        const btnStart = document.querySelector("#btn-start");
        const btnStop = document.querySelector("#btn-stop");

        // 1. 배열을 만들고 이미지 파일 이름을 배열에 저장
        // images = ['0.jpg', '1.jpg', '2.jpg', ..., '9.jpg']
        const images = [];
        for (let i = 0; i < 10; i++) {
            images.push(`${i}.jpg`); // const형 배열의 내용을 변경하는 것은 가능
        }
        
        function showImage() {
            const idx = Math.floor( Math.random() * images.length ); // 0 ~ 9 난수 발생
            imgMain.src = `images/${images[idx]}`; // 해당 난수로 이미지 파일 이름 선택
        }

        function startTimer() {
            // 아직 img에 이미지가 지정되지 않은 경우 ( 첫 번째 호출 )
            if (imgMain.src == null || imgMain.src == "") {
                showImage();
            }
            // 익명함수를 3초 후에 한 번 호출
            timerId = window.setTimeout(function() {
                showImage();
                if (true) {
                    startTimer();
                }
            }, 1000);
        }
        
        let timerId = null;
        btnStart.addEventListener("click", (event) => {
            if (timerId != null) { // 현재 실행 중인 타이머가 있다면
                return; // 함수 실행 종료
            }
            startTimer();
            
        });
        btnStop.addEventListener("click", (event) => {
            // setTimeout으로 시작된 타이머를 중지
            window.clearTimeout(timerId);
            timerId = null;
        });


        

    </script>
</body>
</html>